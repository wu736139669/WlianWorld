//
//  SelectAlterView.m
//  WLTX
//
//  Created by 黄伟斌  on 15/11/16.
//  Copyright (c) 2015年 黄伟斌 . All rights reserved.
//

#import "SelectAlterView.h"
#import "Defines.h"

@interface SelectAlterView()<UITableViewDelegate,UITableViewDataSource>
{
    NSArray *dataArray;
}
@property (strong,nonatomic)UITableView* tableView;
@end
@implementation SelectAlterView


- (id)initWithData:(NSArray *)array
{
    if (self = [super initWithFrame:CGRectMake(0, 0, kScreenWidth, kScreenHeight)]) {
        _tableView = [[UITableView alloc] initWithFrame:CGRectMake(10, 100, kScreenWidth - 20 , 300) style:UITableViewStylePlain];
        _tableView.tableFooterView = [[UIView alloc] init];
        dataArray = array;
        _tableView.delegate = self;
        _tableView.dataSource = self;
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0, 0, kScreenWidth, kScreenHeight);
        button.backgroundColor = [UIColor blackColor];
        button.alpha = 0.1;
        [button addTarget:nil action:@selector(dismissAnimate) forControlEvents:UIControlEventTouchUpInside];
        
        [self addSubview:button];
        [self addSubview:_tableView];
    }
    return self;
    
}

- (void)dismissAnimate
{
    [UIView animateWithDuration:0.1 animations:^{
        self.alpha = 0;
        self.tableView.frame = CGRectMake(kScreenWidth / 2, kScreenHeight / 2 - 150, 0, 0);
    }];
}

- (void)showAnimate
{
    [UIView animateWithDuration:0.1 animations:^{
        self.hidden = NO;
        self.alpha = 1;
        self.tableView.frame = CGRectMake(20, kScreenHeight / 2 - 160,kScreenWidth - 40, (dataArray.count + 1) * 55);
    }];
    
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return dataArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"cell"];
    }
    cell.backgroundColor = [UIColor whiteColor];
    cell.textLabel.text = @"测试购买放入口袋服务";
    cell.textLabel.font = [UIFont fontWithName:@ "Arial Rounded MT Bold"  size:(24.0)];
    cell.textLabel.textAlignment = NSTextAlignmentLeft;
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 55;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 60;
}



- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, kScreenWidth, 60)];
    titleView.backgroundColor = [UIColor whiteColor];
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(15, 5, kScreenWidth - 10, 50)];
        label.textAlignment = NSTextAlignmentLeft;
        [titleView addSubview:label];
    label.text = @"选择一个类型";
    label.font = [UIFont fontWithName:@ "Arial Rounded MT Bold"  size:(32.0)];
    UIView *line = [[UIView alloc] initWithFrame:CGRectMake(0, 60, kScreenWidth, 1)];
    line.backgroundColor = [UIColor redColor];
    [titleView addSubview:line];
    return titleView;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *bCell = [tableView visibleCells][0];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setValue:bCell.textLabel.text forKey:@"String"];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"getStr" object:nil userInfo:dict];
    
}



/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect {
    // Drawing code
}
*/

@end
